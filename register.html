<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Register — Grace Community</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;1,300;1,400&family=Jost:wght@300;400;500&display=swap" rel="stylesheet">
<style>
  *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

  :root {
    --cream: #f5f0e8;
    --warm-white: #fdfaf5;
    --gold: #b8963e;
    --gold-light: #d4b068;
    --deep: #1a1410;
    --bark: #3d2e1e;
    --stone: #8c7b68;
    --muted: #c4b49e;
    --success: #3d6b4f;
    --error: #8b3a3a;
  }

  html { scroll-behavior: smooth; }

  body {
    font-family: 'Jost', sans-serif;
    background: var(--deep);
    color: var(--deep);
    min-height: 100vh;
    cursor: none;
    overflow-x: hidden;
  }

  /* Custom cursor */
  .cursor {
    position: fixed;
    width: 8px; height: 8px;
    background: var(--gold);
    border-radius: 50%;
    pointer-events: none;
    z-index: 9999;
    transform: translate(-50%, -50%);
    transition: transform 0.1s ease;
  }
  .cursor-ring {
    position: fixed;
    width: 32px; height: 32px;
    border: 1px solid var(--gold);
    border-radius: 50%;
    pointer-events: none;
    z-index: 9998;
    transform: translate(-50%, -50%);
    transition: all 0.15s ease;
    opacity: 0.6;
  }

  /* BACKGROUND */
  .page-bg {
    position: fixed;
    inset: 0;
    background:
      radial-gradient(ellipse at 10% 20%, rgba(184,150,62,0.07) 0%, transparent 50%),
      radial-gradient(ellipse at 90% 80%, rgba(61,46,30,0.5) 0%, transparent 50%),
      linear-gradient(150deg, #1a1410 0%, #231a12 40%, #1a1410 100%);
    z-index: 0;
  }

  .page-pattern {
    position: fixed;
    inset: 0;
    z-index: 0;
    opacity: 0.025;
    background-image:
      repeating-linear-gradient(0deg, transparent, transparent 70px, rgba(184,150,62,1) 70px, rgba(184,150,62,1) 71px),
      repeating-linear-gradient(90deg, transparent, transparent 70px, rgba(184,150,62,1) 70px, rgba(184,150,62,1) 71px);
  }

  /* NAV */
  nav {
    position: fixed;
    top: 0; left: 0; right: 0;
    z-index: 100;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 22px 60px;
    background: rgba(26,20,16,0.85);
    backdrop-filter: blur(12px);
    border-bottom: 1px solid rgba(184,150,62,0.12);
  }

  .logo {
    font-family: 'Cormorant Garamond', serif;
    font-size: 1.5rem;
    font-weight: 600;
    color: var(--cream);
    letter-spacing: 0.02em;
    text-decoration: none;
  }
  .logo span { color: var(--gold); }

  .nav-back {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 0.72rem;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    color: var(--muted);
    text-decoration: none;
    transition: color 0.3s;
    cursor: none;
  }
  .nav-back:hover { color: var(--gold); }
  .nav-back svg { width: 14px; height: 14px; }

  /* LAYOUT */
  .page-wrap {
    position: relative;
    z-index: 1;
    min-height: 100vh;
    display: grid;
    grid-template-columns: 1fr 1.1fr;
  }

  /* LEFT PANEL */
  .left-panel {
    display: flex;
    flex-direction: column;
    justify-content: center;
    padding: 120px 80px;
    border-right: 1px solid rgba(184,150,62,0.12);
  }

  .welcome-eyebrow {
    font-size: 0.68rem;
    letter-spacing: 0.35em;
    text-transform: uppercase;
    color: var(--gold);
    margin-bottom: 24px;
    display: flex;
    align-items: center;
    gap: 12px;
  }
  .welcome-eyebrow::before {
    content: '';
    width: 30px; height: 1px;
    background: var(--gold);
  }

  .left-panel h1 {
    font-family: 'Cormorant Garamond', serif;
    font-size: clamp(2.8rem, 4vw, 4rem);
    font-weight: 300;
    line-height: 1.1;
    color: var(--cream);
    margin-bottom: 20px;
  }
  .left-panel h1 em {
    font-style: italic;
    color: var(--gold-light);
  }

  .left-panel .desc {
    color: var(--muted);
    font-size: 0.95rem;
    line-height: 1.9;
    font-weight: 300;
    margin-bottom: 56px;
    max-width: 380px;
  }

  .benefits {
    list-style: none;
    display: flex;
    flex-direction: column;
    gap: 20px;
  }

  .benefit-item {
    display: flex;
    align-items: flex-start;
    gap: 16px;
  }

  .benefit-icon {
    width: 36px; height: 36px;
    border: 1px solid rgba(184,150,62,0.3);
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    color: var(--gold);
  }
  .benefit-icon svg { width: 16px; height: 16px; }

  .benefit-text h4 {
    font-size: 0.88rem;
    color: var(--cream);
    margin-bottom: 3px;
    font-weight: 500;
  }
  .benefit-text p {
    font-size: 0.78rem;
    color: var(--stone);
    line-height: 1.5;
    font-weight: 300;
  }

  .left-quote {
    margin-top: 56px;
    padding: 24px;
    border-left: 2px solid var(--gold);
    background: rgba(184,150,62,0.05);
  }
  .left-quote p {
    font-family: 'Cormorant Garamond', serif;
    font-size: 1.05rem;
    font-style: italic;
    color: var(--cream);
    line-height: 1.6;
    margin-bottom: 8px;
  }
  .left-quote cite {
    font-family: 'Jost', sans-serif;
    font-size: 0.65rem;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    color: var(--gold);
    font-style: normal;
  }

  /* RIGHT PANEL — FORM */
  .right-panel {
    display: flex;
    flex-direction: column;
    justify-content: center;
    padding: 120px 80px;
  }

  .form-card {
    background: var(--warm-white);
    padding: 56px;
    position: relative;
    animation: slideIn 0.6s ease both;
  }
  .form-card::before {
    content: '';
    position: absolute;
    top: -1px; left: -1px; right: -1px;
    height: 3px;
    background: linear-gradient(90deg, var(--gold), var(--gold-light), var(--gold));
  }

  .form-title {
    font-family: 'Cormorant Garamond', serif;
    font-size: 1.9rem;
    color: var(--bark);
    margin-bottom: 4px;
    font-weight: 400;
  }
  .form-subtitle {
    font-size: 0.83rem;
    color: var(--stone);
    margin-bottom: 36px;
    font-weight: 300;
  }

  .form-section-label {
    font-size: 0.62rem;
    letter-spacing: 0.25em;
    text-transform: uppercase;
    color: var(--gold);
    margin-bottom: 16px;
    margin-top: 28px;
    padding-bottom: 8px;
    border-bottom: 1px solid rgba(184,150,62,0.2);
  }

  .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }

  .form-group {
    margin-bottom: 20px;
    position: relative;
  }

  .form-group label {
    display: block;
    font-size: 0.65rem;
    letter-spacing: 0.18em;
    text-transform: uppercase;
    color: var(--bark);
    opacity: 0.7;
    margin-bottom: 8px;
    font-weight: 500;
  }

  .form-group input,
  .form-group select {
    width: 100%;
    background: transparent;
    border: none;
    border-bottom: 1px solid rgba(61,46,30,0.2);
    padding: 10px 0;
    color: var(--deep);
    font-family: 'Jost', sans-serif;
    font-size: 0.92rem;
    font-weight: 400;
    outline: none;
    transition: border-color 0.3s;
    cursor: none;
  }
  .form-group select {
    -webkit-appearance: none;
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='8' viewBox='0 0 12 8'%3E%3Cpath d='M1 1l5 5 5-5' stroke='%23b8963e' stroke-width='1.5' fill='none'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 4px center;
    padding-right: 24px;
  }
  .form-group input:focus,
  .form-group select:focus { border-color: var(--gold); }
  .form-group input::placeholder { color: var(--muted); }

  .form-group input.error { border-color: var(--error); }
  .form-group .error-msg {
    display: none;
    font-size: 0.68rem;
    color: var(--error);
    margin-top: 4px;
  }
  .form-group input.error + .error-msg,
  .form-group .show-error { display: block; }

  /* Password strength */
  .password-strength {
    margin-top: 8px;
    display: flex;
    gap: 4px;
    align-items: center;
  }
  .strength-bar {
    height: 3px;
    flex: 1;
    background: rgba(61,46,30,0.12);
    transition: background 0.3s;
  }
  .strength-label {
    font-size: 0.62rem;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    color: var(--stone);
    min-width: 50px;
    text-align: right;
  }

  /* Checkbox */
  .checkbox-group {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    margin-bottom: 28px;
    margin-top: 8px;
  }
  .checkbox-group input[type="checkbox"] {
    width: 16px; height: 16px;
    accent-color: var(--gold);
    flex-shrink: 0;
    margin-top: 2px;
    cursor: none;
  }
  .checkbox-group label {
    font-size: 0.78rem;
    color: var(--stone);
    line-height: 1.5;
    font-weight: 300;
    cursor: none;
  }
  .checkbox-group a {
    color: var(--gold);
    text-decoration: none;
  }

  /* Submit button */
  .btn-submit {
    width: 100%;
    padding: 18px;
    background: var(--gold);
    color: white;
    border: none;
    font-family: 'Jost', sans-serif;
    font-size: 0.78rem;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    font-weight: 500;
    cursor: none;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
  }
  .btn-submit:hover { background: var(--bark); }
  .btn-submit:disabled { opacity: 0.6; }
  .btn-submit .btn-loading {
    display: none;
    position: absolute;
    inset: 0;
    align-items: center;
    justify-content: center;
    background: var(--gold);
  }
  .btn-submit.loading .btn-loading { display: flex; }
  .btn-submit.loading .btn-text { opacity: 0; }

  .spinner {
    width: 20px; height: 20px;
    border: 2px solid rgba(255,255,255,0.3);
    border-top-color: white;
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
  }

  .form-footer {
    text-align: center;
    margin-top: 20px;
    font-size: 0.78rem;
    color: var(--stone);
  }
  .form-footer a {
    color: var(--gold);
    text-decoration: none;
    cursor: none;
  }

  /* SUCCESS STATE */
  .success-state {
    display: none;
    text-align: center;
    padding: 20px 0;
    animation: fadeUp 0.5s ease both;
  }
  .success-state.show { display: block; }

  .success-icon {
    width: 72px; height: 72px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--gold), var(--gold-light));
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 24px;
    animation: popIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) both;
  }
  .success-icon svg { width: 32px; height: 32px; color: white; }

  .success-state h3 {
    font-family: 'Cormorant Garamond', serif;
    font-size: 2rem;
    color: var(--bark);
    margin-bottom: 12px;
  }
  .success-state p {
    color: var(--stone);
    font-size: 0.9rem;
    line-height: 1.7;
    margin-bottom: 32px;
    font-weight: 300;
  }
  .success-state .member-card {
    background: var(--cream);
    padding: 24px;
    margin-bottom: 28px;
    border-left: 3px solid var(--gold);
    text-align: left;
  }
  .member-card .mc-label {
    font-size: 0.6rem;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: var(--gold);
    margin-bottom: 4px;
    display: block;
  }
  .member-card .mc-value {
    font-family: 'Cormorant Garamond', serif;
    font-size: 1.1rem;
    color: var(--bark);
  }
  .member-card .mc-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
    margin-top: 12px;
  }

  /* ADMIN VIEW */
  .admin-toggle {
    position: fixed;
    bottom: 30px; right: 30px;
    background: var(--bark);
    color: var(--gold);
    border: 1px solid var(--gold);
    padding: 10px 18px;
    font-family: 'Jost', sans-serif;
    font-size: 0.65rem;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    cursor: none;
    z-index: 50;
    transition: all 0.3s;
  }
  .admin-toggle:hover { background: var(--gold); color: var(--deep); }

  .admin-panel {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(26,20,16,0.97);
    z-index: 200;
    overflow-y: auto;
    padding: 40px;
  }
  .admin-panel.open { display: block; animation: fadeIn 0.3s ease; }

  .admin-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 40px;
    padding-bottom: 20px;
    border-bottom: 1px solid rgba(184,150,62,0.2);
  }
  .admin-header h2 {
    font-family: 'Cormorant Garamond', serif;
    font-size: 2rem;
    color: var(--cream);
  }
  .admin-header .close-btn {
    background: none;
    border: 1px solid rgba(184,150,62,0.3);
    color: var(--muted);
    padding: 8px 16px;
    font-family: 'Jost', sans-serif;
    font-size: 0.7rem;
    letter-spacing: 0.1em;
    cursor: none;
    transition: all 0.2s;
  }
  .admin-header .close-btn:hover { border-color: var(--gold); color: var(--gold); }

  .admin-stats {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 20px;
    margin-bottom: 40px;
  }

  .stat-card {
    background: rgba(255,255,255,0.04);
    border: 1px solid rgba(184,150,62,0.15);
    padding: 24px;
  }
  .stat-card .s-num {
    font-family: 'Cormorant Garamond', serif;
    font-size: 2.2rem;
    color: var(--gold);
    display: block;
    line-height: 1;
  }
  .stat-card .s-label {
    font-size: 0.65rem;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    color: var(--stone);
    margin-top: 6px;
    display: block;
  }

  .members-table {
    width: 100%;
    border-collapse: collapse;
  }
  .members-table th {
    font-size: 0.62rem;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: var(--gold);
    padding: 12px 16px;
    text-align: left;
    border-bottom: 1px solid rgba(184,150,62,0.2);
    background: rgba(184,150,62,0.05);
  }
  .members-table td {
    font-size: 0.85rem;
    color: var(--muted);
    padding: 14px 16px;
    border-bottom: 1px solid rgba(184,150,62,0.06);
    font-weight: 300;
  }
  .members-table tr:hover td { background: rgba(184,150,62,0.04); }

  .badge {
    display: inline-block;
    padding: 3px 10px;
    font-size: 0.6rem;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    background: rgba(184,150,62,0.15);
    color: var(--gold);
    border-radius: 2px;
  }

  .empty-state {
    text-align: center;
    padding: 60px;
    color: var(--stone);
  }
  .empty-state svg { width: 40px; height: 40px; margin: 0 auto 16px; display: block; opacity: 0.3; }

  /* ANIMATIONS */
  @keyframes slideIn {
    from { opacity: 0; transform: translateX(30px); }
    to { opacity: 1; transform: translateX(0); }
  }
  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }
  @keyframes popIn {
    from { transform: scale(0); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
  }
  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }
  @keyframes spin {
    to { transform: rotate(360deg); }
  }

  @media (max-width: 900px) {
    nav { padding: 18px 24px; }
    .page-wrap { grid-template-columns: 1fr; }
    .left-panel { display: none; }
    .right-panel { padding: 100px 24px 60px; }
    .form-card { padding: 36px 28px; }
    .form-row { grid-template-columns: 1fr; gap: 0; }
    .admin-stats { grid-template-columns: 1fr 1fr; }
    .admin-panel { padding: 24px; }
  }
</style>
</head>
<body>

<div class="cursor" id="cursor"></div>
<div class="cursor-ring" id="cursorRing"></div>
<div class="page-bg"></div>
<div class="page-pattern"></div>

<!-- NAV -->
<nav>
  <a href="index.html" class="logo">Grace <span>Community</span></a>
  <a href="index.html" class="nav-back">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 5l-7 7 7 7"/></svg>
    Back to Home
  </a>
</nav>

<!-- PAGE WRAP -->
<div class="page-wrap">

  <!-- LEFT -->
  <div class="left-panel">
    <div class="welcome-eyebrow">Join Our Family</div>
    <h1>Become Part of<br>Something <em>Greater</em></h1>
    <p class="desc">Creating an account unlocks your full community experience — from forum discussions to event sign-ups and personal prayer requests.</p>

    <ul class="benefits">
      <li class="benefit-item">
        <div class="benefit-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0"/></svg>
        </div>
        <div class="benefit-text">
          <h4>Community Forum Access</h4>
          <p>Join thousands of members in meaningful discussion and shared prayer.</p>
        </div>
      </li>
      <li class="benefit-item">
        <div class="benefit-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/></svg>
        </div>
        <div class="benefit-text">
          <h4>Event Registration</h4>
          <p>Reserve your spot at services, retreats, and community gatherings.</p>
        </div>
      </li>
      <li class="benefit-item">
        <div class="benefit-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/></svg>
        </div>
        <div class="benefit-text">
          <h4>Personal Prayer Wall</h4>
          <p>Submit prayer requests and be prayed for by our entire community.</p>
        </div>
      </li>
      <li class="benefit-item">
        <div class="benefit-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/></svg>
        </div>
        <div class="benefit-text">
          <h4>Weekly Newsletter</h4>
          <p>Receive sermons, devotionals, and community news directly to your inbox.</p>
        </div>
      </li>
    </ul>

    <div class="left-quote">
      <p>"For where two or three gather in my name, there am I with them."</p>
      <cite>— Matthew 18:20</cite>
    </div>
  </div>

  <!-- RIGHT -->
  <div class="right-panel">
    <div class="form-card" id="formCard">

      <!-- FORM STATE -->
      <div id="formState">
        <div class="form-title">Create Your Account</div>
        <div class="form-subtitle">Already a member? <a href="index.html" id="loginLink" style="color:var(--gold);cursor:none;">Sign in here →</a></div>

        <form id="registerForm" novalidate>
          <div class="form-section-label">Personal Information</div>
          <div class="form-row">
            <div class="form-group">
              <label>First Name *</label>
              <input type="text" id="firstName" placeholder="John" required>
              <span class="error-msg">Please enter your first name.</span>
            </div>
            <div class="form-group">
              <label>Last Name *</label>
              <input type="text" id="lastName" placeholder="Smith" required>
              <span class="error-msg">Please enter your last name.</span>
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label>Date of Birth</label>
              <input type="date" id="dob">
            </div>
            <div class="form-group">
              <label>Phone Number</label>
              <input type="tel" id="phone" placeholder="(555) 000-0000">
            </div>
          </div>

          <div class="form-section-label">Account Details</div>
          <div class="form-group">
            <label>Email Address *</label>
            <input type="email" id="email" placeholder="john@example.com" required>
            <span class="error-msg" id="emailError">Please enter a valid email address.</span>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label>Password *</label>
              <input type="password" id="password" placeholder="••••••••" required>
              <div class="password-strength">
                <div class="strength-bar" id="sb1"></div>
                <div class="strength-bar" id="sb2"></div>
                <div class="strength-bar" id="sb3"></div>
                <div class="strength-bar" id="sb4"></div>
                <span class="strength-label" id="strengthLabel"></span>
              </div>
              <span class="error-msg">Password must be at least 8 characters.</span>
            </div>
            <div class="form-group">
              <label>Confirm Password *</label>
              <input type="password" id="confirmPassword" placeholder="••••••••" required>
              <span class="error-msg">Passwords do not match.</span>
            </div>
          </div>

          <div class="form-section-label">Community Preferences</div>
          <div class="form-row">
            <div class="form-group">
              <label>How did you hear about us?</label>
              <select id="source">
                <option value="">Select one</option>
                <option value="friend">A Friend / Family</option>
                <option value="social">Social Media</option>
                <option value="search">Online Search</option>
                <option value="event">Community Event</option>
                <option value="other">Other</option>
              </select>
            </div>
            <div class="form-group">
              <label>Ministry Interest</label>
              <select id="ministry">
                <option value="">Select one</option>
                <option value="youth">Youth Ministry</option>
                <option value="worship">Worship Team</option>
                <option value="outreach">Outreach & Service</option>
                <option value="study">Bible Study</option>
                <option value="general">General Member</option>
              </select>
            </div>
          </div>

          <div class="checkbox-group">
            <input type="checkbox" id="newsletter" checked>
            <label for="newsletter">Subscribe me to the weekly newsletter and community updates.</label>
          </div>

          <div class="checkbox-group">
            <input type="checkbox" id="terms" required>
            <label for="terms">I agree to the <a href="#">Terms of Service</a> and <a href="#">Community Guidelines</a>. I understand this is a faith-based community built on respect. *</label>
          </div>

          <div id="globalError" style="display:none; background:rgba(139,58,58,0.1); border-left:2px solid var(--error); padding:12px 16px; margin-bottom:20px; font-size:0.82rem; color:var(--error);"></div>

          <button type="submit" class="btn-submit" id="submitBtn">
            <span class="btn-text">Create My Account</span>
            <div class="btn-loading"><div class="spinner"></div></div>
          </button>
          <div class="form-footer">Already have an account? <a href="index.html">Sign in →</a></div>
        </form>
      </div>

      <!-- SUCCESS STATE -->
      <div class="success-state" id="successState">
        <div class="success-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>
        </div>
        <h3>Welcome to the Family!</h3>
        <p>Your account has been created and saved. You are now part of Grace Community — a place where everyone belongs.</p>
        <div class="member-card" id="memberCard"></div>
        <a href="index.html" style="display:inline-block; padding:16px 40px; background:var(--gold); color:white; font-family:'Jost',sans-serif; font-size:0.75rem; letter-spacing:0.18em; text-transform:uppercase; text-decoration:none; cursor:none; transition:all 0.3s;" onmouseover="this.style.background='var(--bark)'" onmouseout="this.style.background='var(--gold)'">Go to Homepage</a>
      </div>
    </div>
  </div>
</div>

<!-- ADMIN TOGGLE (bottom right) -->
<button class="admin-toggle" onclick="openAdmin()">⚙ View Members DB</button>

<!-- ADMIN PANEL -->
<div class="admin-panel" id="adminPanel">
  <div style="max-width:1100px; margin:0 auto;">
    <div class="admin-header">
      <h2>Members Database</h2>
      <div style="display:flex; gap:12px; align-items:center;">
        <button onclick="clearDatabase()" style="background:none; border:1px solid rgba(139,58,58,0.5); color:#c47070; padding:8px 16px; font-family:'Jost',sans-serif; font-size:0.65rem; letter-spacing:0.12em; text-transform:uppercase; cursor:none; transition:all 0.2s;" onmouseover="this.style.borderColor='#c47070'" onmouseout="this.style.borderColor='rgba(139,58,58,0.5)'">Clear All</button>
        <button class="close-btn" onclick="closeAdmin()">✕ Close</button>
      </div>
    </div>

    <div class="admin-stats" id="adminStats"></div>

    <div id="membersTableWrap"></div>
  </div>
</div>

<script>
  // ─── CURSOR ───────────────────────────────────────────────
  const cursor = document.getElementById('cursor');
  const ring = document.getElementById('cursorRing');
  document.addEventListener('mousemove', e => {
    cursor.style.left = e.clientX + 'px';
    cursor.style.top = e.clientY + 'px';
    setTimeout(() => {
      ring.style.left = e.clientX + 'px';
      ring.style.top = e.clientY + 'px';
    }, 60);
  });
  document.querySelectorAll('a, button, input, select').forEach(el => {
    el.addEventListener('mouseenter', () => ring.style.transform = 'translate(-50%,-50%) scale(1.8)');
    el.addEventListener('mouseleave', () => ring.style.transform = 'translate(-50%,-50%) scale(1)');
  });

  // ─── DATABASE (localStorage) ──────────────────────────────
  function getMembers() {
    try { return JSON.parse(localStorage.getItem('grace_members') || '[]'); }
    catch { return []; }
  }
  function saveMembers(members) {
    localStorage.setItem('grace_members', JSON.stringify(members));
  }
  function addMember(member) {
    const members = getMembers();
    // Check for duplicate email
    if (members.find(m => m.email.toLowerCase() === member.email.toLowerCase())) {
      return { success: false, message: 'An account with this email already exists.' };
    }
    member.id = 'GC-' + Date.now();
    member.joinedAt = new Date().toISOString();
    members.push(member);
    saveMembers(members);
    return { success: true, member };
  }

  // ─── PASSWORD STRENGTH ────────────────────────────────────
  document.getElementById('password').addEventListener('input', function() {
    const val = this.value;
    let score = 0;
    if (val.length >= 8) score++;
    if (/[A-Z]/.test(val)) score++;
    if (/[0-9]/.test(val)) score++;
    if (/[^A-Za-z0-9]/.test(val)) score++;
    const colors = ['', '#c47070', '#d4a04a', '#6b9e75', '#3d6b4f'];
    const labels = ['', 'Weak', 'Fair', 'Good', 'Strong'];
    for (let i = 1; i <= 4; i++) {
      document.getElementById('sb' + i).style.background = i <= score ? colors[score] : 'rgba(61,46,30,0.12)';
    }
    document.getElementById('strengthLabel').textContent = val.length ? labels[score] : '';
    document.getElementById('strengthLabel').style.color = colors[score];
  });

  // ─── FORM VALIDATION & SUBMIT ─────────────────────────────
  document.getElementById('registerForm').addEventListener('submit', async function(e) {
    e.preventDefault();
    const btn = document.getElementById('submitBtn');
    hideGlobalError();

    // Collect values
    const firstName = document.getElementById('firstName').value.trim();
    const lastName  = document.getElementById('lastName').value.trim();
    const email     = document.getElementById('email').value.trim();
    const password  = document.getElementById('password').value;
    const confirm   = document.getElementById('confirmPassword').value;
    const terms     = document.getElementById('terms').checked;
    const dob       = document.getElementById('dob').value;
    const phone     = document.getElementById('phone').value.trim();
    const source    = document.getElementById('source').value;
    const ministry  = document.getElementById('ministry').value;
    const newsletter = document.getElementById('newsletter').checked;

    // Validate
    let valid = true;
    clearErrors();

    if (!firstName) { setError('firstName', true); valid = false; }
    if (!lastName)  { setError('lastName', true); valid = false; }
    if (!email || !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) { setError('email', true); valid = false; }
    if (!password || password.length < 8) { setError('password', true); valid = false; }
    if (password !== confirm) { setError('confirmPassword', true); valid = false; }
    if (!terms) { showGlobalError('You must agree to the Terms of Service to continue.'); valid = false; }

    if (!valid) return;

    // Simulate loading
    btn.classList.add('loading');
    btn.disabled = true;
    await delay(1200);

    // Save to DB
    const result = addMember({
      firstName, lastName, email,
      password: hashSimple(password), // never store plaintext
      dob, phone, source, ministry, newsletter
    });

    btn.classList.remove('loading');
    btn.disabled = false;

    if (!result.success) {
      showGlobalError(result.message);
      return;
    }

    // Show success
    showSuccess(result.member);
  });

  function setError(id, show) {
    const input = document.getElementById(id);
    if (!input) return;
    input.classList.toggle('error', show);
    const err = input.nextElementSibling;
    if (err && err.classList.contains('error-msg')) err.style.display = show ? 'block' : 'none';
  }
  function clearErrors() {
    document.querySelectorAll('input.error').forEach(i => i.classList.remove('error'));
    document.querySelectorAll('.error-msg').forEach(e => e.style.display = 'none');
  }
  function showGlobalError(msg) {
    const el = document.getElementById('globalError');
    el.textContent = msg;
    el.style.display = 'block';
  }
  function hideGlobalError() {
    document.getElementById('globalError').style.display = 'none';
  }

  function delay(ms) { return new Promise(r => setTimeout(r, ms)); }

  function hashSimple(str) {
    // Simple hash for demo (use bcrypt server-side in production)
    let hash = 0;
    for (let i = 0; i < str.length; i++) hash = ((hash << 5) - hash) + str.charCodeAt(i);
    return 'hashed_' + Math.abs(hash).toString(16);
  }

  function showSuccess(member) {
    document.getElementById('formState').style.display = 'none';
    const s = document.getElementById('successState');
    s.classList.add('show');

    const ministryLabels = {
      youth:'Youth Ministry', worship:'Worship Team',
      outreach:'Outreach & Service', study:'Bible Study', general:'General Member', '': 'General Member'
    };

    document.getElementById('memberCard').innerHTML = `
      <span class="mc-label">Member ID</span>
      <span class="mc-value">${member.id}</span>
      <div class="mc-row">
        <div>
          <span class="mc-label" style="margin-top:10px;display:block;">Full Name</span>
          <span class="mc-value">${member.firstName} ${member.lastName}</span>
        </div>
        <div>
          <span class="mc-label" style="margin-top:10px;display:block;">Email</span>
          <span class="mc-value" style="font-size:0.9rem;">${member.email}</span>
        </div>
        <div>
          <span class="mc-label" style="margin-top:10px;display:block;">Ministry</span>
          <span class="mc-value">${ministryLabels[member.ministry] || 'General Member'}</span>
        </div>
        <div>
          <span class="mc-label" style="margin-top:10px;display:block;">Joined</span>
          <span class="mc-value">${new Date(member.joinedAt).toLocaleDateString('en-US', {month:'long', day:'numeric', year:'numeric'})}</span>
        </div>
      </div>
    `;
  }

  // ─── ADMIN PANEL ──────────────────────────────────────────
  function openAdmin() {
    renderAdmin();
    document.getElementById('adminPanel').classList.add('open');
  }
  function closeAdmin() {
    document.getElementById('adminPanel').classList.remove('open');
  }

  function renderAdmin() {
    const members = getMembers();
    const ministryLabels = {
      youth:'Youth Ministry', worship:'Worship Team',
      outreach:'Outreach & Service', study:'Bible Study', general:'General Member'
    };

    const today = new Date().toDateString();
    const todayCount = members.filter(m => new Date(m.joinedAt).toDateString() === today).length;
    const newsletterCount = members.filter(m => m.newsletter).length;
    const ministryCounts = {};
    members.forEach(m => { ministryCounts[m.ministry] = (ministryCounts[m.ministry] || 0) + 1; });
    const topMinistry = Object.entries(ministryCounts).sort((a,b) => b[1]-a[1])[0];

    document.getElementById('adminStats').innerHTML = `
      <div class="stat-card"><span class="s-num">${members.length}</span><span class="s-label">Total Members</span></div>
      <div class="stat-card"><span class="s-num">${todayCount}</span><span class="s-label">Joined Today</span></div>
      <div class="stat-card"><span class="s-num">${newsletterCount}</span><span class="s-label">Newsletter Subscribers</span></div>
      <div class="stat-card"><span class="s-num">${topMinistry ? ministryLabels[topMinistry[0]] || '—' : '—'}</span><span class="s-label">Top Ministry Interest</span></div>
    `;

    if (!members.length) {
      document.getElementById('membersTableWrap').innerHTML = `
        <div class="empty-state">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"/></svg>
          <p style="font-size:0.9rem;">No members registered yet. Be the first!</p>
        </div>
      `;
      return;
    }

    const rows = members.map(m => `
      <tr>
        <td><span style="color:var(--gold);font-size:0.75rem;">${m.id}</span></td>
        <td style="color:var(--cream);">${m.firstName} ${m.lastName}</td>
        <td>${m.email}</td>
        <td>${m.phone || '—'}</td>
        <td><span class="badge">${ministryLabels[m.ministry] || 'General'}</span></td>
        <td>${m.newsletter ? '<span style="color:#6b9e75;">✓ Yes</span>' : '<span style="color:var(--stone);">No</span>'}</td>
        <td>${new Date(m.joinedAt).toLocaleDateString('en-US', {month:'short', day:'numeric', year:'numeric'})}</td>
        <td>
          <button onclick="deleteMember('${m.id}')" style="background:none;border:none;color:var(--stone);cursor:none;font-size:0.8rem;transition:color 0.2s;" onmouseover="this.style.color='#c47070'" onmouseout="this.style.color='var(--stone)'">✕ Remove</button>
        </td>
      </tr>
    `).join('');

    document.getElementById('membersTableWrap').innerHTML = `
      <div style="overflow-x:auto;">
        <table class="members-table">
          <thead>
            <tr>
              <th>Member ID</th>
              <th>Name</th>
              <th>Email</th>
              <th>Phone</th>
              <th>Ministry</th>
              <th>Newsletter</th>
              <th>Joined</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody>${rows}</tbody>
        </table>
      </div>
    `;
  }

  function deleteMember(id) {
    if (!confirm('Remove this member?')) return;
    const members = getMembers().filter(m => m.id !== id);
    saveMembers(members);
    renderAdmin();
  }

  function clearDatabase() {
    if (!confirm('Are you sure you want to delete ALL members? This cannot be undone.')) return;
    localStorage.removeItem('grace_members');
    renderAdmin();
  }

  // ─── PHONE FORMATTING ─────────────────────────────────────
  document.getElementById('phone').addEventListener('input', function() {
    let v = this.value.replace(/\D/g,'');
    if (v.length >= 6) v = '(' + v.slice(0,3) + ') ' + v.slice(3,6) + '-' + v.slice(6,10);
    else if (v.length >= 3) v = '(' + v.slice(0,3) + ') ' + v.slice(3);
    this.value = v;
  });
</script>
</body>
</html>
